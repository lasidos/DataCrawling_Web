
@{
    ViewBag.Title = "로그인";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(window).ready(function () {
        $('.password').on("keyup", function (key) {
            if (key.keyCode == 13) {
                if ($('.password').val() != "") {
                    AccountLogin();
                }
            }
        });

        $('.wrap_btn .btn_g').click(function () {
            AccountLogin();
        });
    });

    function AccountLogin() {
        var email = $('.account').val();
        var password = $('.password').val();

        if (email == "") {
            alert('계정 (이메일)이 입력되지 않았습니다.');
            return;
        }
        if (password == "") {
            alert('비밀번호가 입력되지 않았습니다.');
            return;
        }

        $.post("/Account/UserLogin", { email: email, pw: password, redirect: @ViewBag.redirect});

        @*$.ajax({
            async: false,
            url: '/Account/UserLogin',
            data: {
                email: email,
                pw: password,
                redirect: @ViewBag.redirect
            },
            success: function (data) {
                if (data.split('|')[0] == "0") {
                    var url = null;
                    if (data.split('|')[1].startsWith('http')) {
                        url = data.split('|')[1];
                    } else {
                        url = 'http://' + data.split('|')[1];
                    }
                    var form = document.createElement('form'); // 폼객체 생성
                    var objs;
                    objs = document.createElement('input');
                    objs.setAttribute('type', 'text'); // 값이 들어있는 녀석의 type
                    objs.setAttribute('name', 'auth'); // 객체이름
                    objs.setAttribute('value', data.split('|')[2]); //객체값
                    form.appendChild(objs);
                    form.setAttribute('method', 'post'); //get,post 가능
                    form.setAttribute('action', url); //보내는 url
                    document.body.appendChild(form);
                    form.submit();
                } else {
                    alert(data.split('|')[1]);
                }
            },
            error: function (response) {
                alert(response);
            }
        });*@
    }
</script>

@section Content{
    <div class="container">
        <div class="login-img">
            <img src="~/Resource/Image/Account/login-img.png" />
        </div>
        <div class="login-area">
            <div class="title">
                <h1>MyPlatform</h1>
            </div>
            <div class="frm-login">
                <div class="loginAccountField">
                    <input type="text" name="account" class="account" value="" placeholder="마이플랫폼 계정 (이메일)" />
                </div>
                <div class="loginPasswordField">
                    <input type="password" name="password" class="password" value="" placeholder="비밀번호" />
                </div>
                <div class="info-user">
                    <div>
                        <a href="/Account/create_account">
                            <span>회원가입</span>
                        </a>
                    </div>
                    <div>
                        <a href="/Account/find_account">
                            <span>계정 찾기</span>
                        </a>
                        <a href="/Account/find_password">
                            <span>비밀번호 찾기</span>
                        </a>
                    </div>
                </div>
                <div class="wrap_btn">
                    <button class="btn_g btn_confirm submit" type="button">로그인</button>
                </div>
            </div>
            <span class="line_or">
                <span class="txt_or">또는</span>
            </span>
            <div class="social-login">
                <div class="naver-login">
                    <img src="~/Resource/Image/Account/naver.png" />
                    <span>네이버로그인</span>
                </div>
                <div class="kakao-login">
                    <img src="~/Resource/Image/Account/kakaolink_btn_small.png" />
                    <span>카카오로그인</span>
                </div>
            </div>
        </div>
    </div>

    <script src="~/Resource/Js/Account/login.js"></script>
    <link href="~/Resource/Css/Account/login.css" rel="stylesheet" />
}